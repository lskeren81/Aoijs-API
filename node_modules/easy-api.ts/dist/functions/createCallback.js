"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.data=void 0;const builder_1=require("../classes/builder"),utils_1=require("../classes/utils");async function _(a){if(a.fields)for(let e=0;e<a.fields.length;e++)for(var l of a.fields[e].overs)await _(l),a.fields[e].value=a.fields[e].value.replace(l.id,l.total),a.inside=a.inside?.replace(l.id,l.total),a.total=a.total.replace(l.id,l.total)}exports.data={data:(new builder_1.FunctionBuilder).setName("createCallback").setValue("description","Create a new fuction callable, to call it use $callback").setValue("use","$createCallback[id;code]").setValue("returns","Void"),code:async e=>{var a;return await e.interpreter.resolve_field(e,0),!e.func?.fields||e.func.fields.length<2?utils_1.Utils.Warn("Invalid inside provided in:",e.func?.name):(a=e.func.fields[0].value,e._.callbacks||(e._.callbacks={}),await _(e.func),e._.callbacks[a.unescape()]={value:e.func.fields[1].value.unescape()},{code:e.code.replace(e.func.id,"")})}};